{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hasan\\\\Desktop\\\\razorpayTest\\\\frontend\\\\src\\\\components\\\\Products.jsx\";\nimport React from \"react\";\nimport \"./Products.scss\";\nimport \"../App.css\";\nimport axios from \"axios\";\n\nfunction loadScript(src) {\n  return new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = () => {\n      resolve(true);\n    };\n\n    script.onerror = () => {\n      resolve(false);\n    };\n\n    document.body.appendChild(script);\n  });\n}\n\nconst Products = ({\n  products\n}) => {\n  async function displayRazorpay(prod) {\n    const res = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n    if (!res) {\n      alert(\"Razorpay SDK failed to load. Are you online?\");\n      return;\n    }\n\n    const data = await axios.post(\"http://localhost:8000/razorpay\", {\n      amount: prod.price,\n      receipt_email: \"customer@example.com\"\n    });\n    console.log(data);\n    const options = {\n      key: \"rzp_test_EjcezZcjp2kQNI\",\n      currency: data.currency,\n      amount: data.amount.toString(),\n      order_id: data.id,\n      name: prod.name,\n      description: \"Test for payment gateway\",\n      image: \"\",\n      handler: function (response) {\n        alert(\"Order successful with: \\nPayment ID:\" + response.razorpay_payment_id + \"\\nOrder ID:\" + response.razorpay_order_id + \"\\nSignature:\" + response.razorpay_signature);\n      },\n      prefill: {\n        name: prod.name,\n        email: \"xyz@gmail.com\",\n        phone_number: \"9898989898\"\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  }\n\n  return products.map(prod => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product\",\n    key: prod.id\n  }, /*#__PURE__*/React.createElement(\"section\", null, /*#__PURE__*/React.createElement(\"h2\", null, prod.name), /*#__PURE__*/React.createElement(\"p\", null, prod.desc), /*#__PURE__*/React.createElement(\"h3\", null, \"₹\" + prod.price), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => displayRazorpay(prod)\n  }, \"PURCHASE\")), /*#__PURE__*/React.createElement(\"img\", {\n    src: prod.img,\n    alt: prod.name\n  })));\n};\n\nexport default Products;","map":{"version":3,"sources":["C:/Users/hasan/Desktop/razorpayTest/frontend/src/components/Products.jsx"],"names":["React","axios","loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","Products","products","displayRazorpay","prod","res","alert","data","post","amount","price","receipt_email","console","log","options","key","currency","toString","order_id","id","name","description","image","handler","response","razorpay_payment_id","razorpay_order_id","razorpay_signature","prefill","email","phone_number","paymentObject","window","Razorpay","open","map","desc","img"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Products.scss\";\r\nimport \"../App.css\";\r\nimport axios from \"axios\";\r\n\r\nfunction loadScript(src) {\r\n  return new Promise((resolve) => {\r\n    const script = document.createElement(\"script\");\r\n    script.src = src;\r\n    script.onload = () => {\r\n      resolve(true);\r\n    };\r\n    script.onerror = () => {\r\n      resolve(false);\r\n    };\r\n    document.body.appendChild(script);\r\n  });\r\n}\r\n\r\nconst Products = ({ products }) => {\r\n  async function displayRazorpay(prod) {\r\n    const res = await loadScript(\r\n      \"https://checkout.razorpay.com/v1/checkout.js\"\r\n    );\r\n\r\n    if (!res) {\r\n      alert(\"Razorpay SDK failed to load. Are you online?\");\r\n      return;\r\n    }\r\n\r\n    const data = await axios.post(\"http://localhost:8000/razorpay\", {\r\n      amount: prod.price,\r\n      receipt_email: \"customer@example.com\",\r\n    });\r\n\r\n    console.log(data);\r\n\r\n    const options = {\r\n      key: \"rzp_test_EjcezZcjp2kQNI\",\r\n      currency: data.currency,\r\n      amount: data.amount.toString(),\r\n      order_id: data.id,\r\n      name: prod.name,\r\n      description: \"Test for payment gateway\",\r\n      image: \"\",\r\n      handler: function (response) {\r\n        alert(\r\n          \"Order successful with: \\nPayment ID:\" +\r\n            response.razorpay_payment_id +\r\n            \"\\nOrder ID:\" +\r\n            response.razorpay_order_id +\r\n            \"\\nSignature:\" +\r\n            response.razorpay_signature\r\n        );\r\n      },\r\n      prefill: {\r\n        name: prod.name,\r\n        email: \"xyz@gmail.com\",\r\n        phone_number: \"9898989898\",\r\n      },\r\n    };\r\n    const paymentObject = new window.Razorpay(options);\r\n    paymentObject.open();\r\n  }\r\n\r\n  return products.map((prod) => (\r\n    <div className=\"product\" key={prod.id}>\r\n      <section>\r\n        <h2>{prod.name}</h2>\r\n        <p>{prod.desc}</p>\r\n        <h3>{\"₹\" + prod.price}</h3>\r\n        <button type=\"button\" onClick={() => displayRazorpay(prod)}>\r\n          PURCHASE\r\n        </button>\r\n      </section>\r\n      <img src={prod.img} alt={prod.name} />\r\n    </div>\r\n  ));\r\n};\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}